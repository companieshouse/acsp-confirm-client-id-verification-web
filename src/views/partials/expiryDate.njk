{% from "govuk/components/date-input/macro.njk" import govukDateInput %}

  {% if errors["expiryDateDay_1"] %}
    {% set errorMessageText = errors["expiryDateDay_1"].text %}
  {% elif errors["expiryDateMonth_1"] %}
    {% set errorMessageText = errors["expiryDateMonth_1"].text %}
  {% elif errors["expiryDateYear_1"] %}
    {% set errorMessageText = errors["expiryDateYear_1"].text %}
  {% endif %}

  <div>    
      {{ govukDateInput({
          id: "expiryDate_{{index}}",
          namePrefix: "dob",
          fieldset: {
            legend: {
              text: i18n.dateOfBirthTitle,
              isPageHeading: true,
              classes: "govuk-fieldset__legend--l"
            }
          },
          hint: {
            text: i18n.dateOfBirthHint
          },
          errorMessage: {
            text: errorMessageText
          } if errors | length,
          
          items: [
            {
              name: "day",
              classes: "govuk-input--error govuk-input--width-2" if errors else "govuk-input--width-2",
              autocomplete: "bday-day",
              id: "dob-day",
              value: payload["dob-day"],
              label: i18n.day
            },
            {
              name: "month",
              classes: "govuk-input--error govuk-input--width-2" if errors else "govuk-input--width-2",
              autocomplete: "bday-month",
              id: "dob-month",
              value: payload["dob-month"],
              label: i18n.month
            },
            {
              name: "year",
              classes: "govuk-input--error govuk-input--width-4" if errors else "govuk-input--width-4",
              autocomplete: "bday-year",
              id: "dob-year",
              value: payload["dob-year"],
              label: i18n.year
            }
          ]
        }) }}
  </div>


